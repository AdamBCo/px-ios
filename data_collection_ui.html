<!DOCTYPE html>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  <title>Data-collection UI</title>
  </head>

  <body>
    <header>
      <div class="inner">
          <img src="images/logo-mercadopago.png" alt="logoMp">

          <div class="right">
              <img class="centered" src="images/logo-iOS.png" alt="logoAndroid">
          </div>
      </div>
    </header>
    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
            <h1>Data-collection UI</h1>
            <p>We offer you solutions to collect both payment methods and shipping information. Using this flavor, once collected this information, you'll have to make a payment by yourself (if curious, have a look at <a href="make_payment.html">Make a payment</a>).</p>
            <p>Here, you'll learn:</p>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#guessing_form">How to launch a card from with guessing</a><br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#launch_payment_vault">How to launch a payment method selection flow</a><br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#payment_vault_ui">How our UI looks like</a><br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get_payment_method_data">How to get collected data in your launcher activity</a><br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#payment_method_exclusions">How exclude payment methods, payment types and more</a><br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#payment_method_defaults">How to set a default payment method</a><br>


            <h2><a name="guessing_form"></a>Payment methods data collection UI</h2>

            <p>Add this code to launch the solution:</p>
            <pre class="prettyprint">
              // Obtain the root view controller for payment vault flow
              let viewController = MPFlowBuilder.startPaymentVaultViewController(1.00, currencyId : "MXN", purchaseTitle: "Purchase Title", excludedPaymentTypes: nil, excludedPaymentMethods: nil, callback: { (paymentMethod, tokenId, issuer, installments) -> Void in
                // After displaying the payment vault flow, you'll get paymentMethod, tokenId (for credit card), issuer (if necessary) and installments chosen by the buyer
                // Here you can make the payment with the info retrieved
             })
            </pre>
            <p><a name="payment_vault_ui"></a><b>Let's see!</b></p>
            <p>The following screen is shown:</p>
            <img class="centered" src="images/isoScreenshots/revamp-groups.png" alt="revamp-inicio">
            <p class="image_footer">Payment method choise example</p>
            <p>Your users can visualize their purchase information by clicking on the shopping cart icon:</p>
            <img class="centered" src="images/screenshots/revamp-shopping_cart.png" alt="revamp-shopping_cart">
            <p class="image_footer">Information shown when clicking on icon in the upper right corner of the screen</p>

            <p>Within this screen, your user will be able to choose a payment method by going into the shown options, as we'll see in the following sections.</p>



          <h2><a name="launch_payment_vault"></a>Payment methods data collection UI</h2>

          <p>Add this code to launch the solution:</p>
          <pre class="prettyprint">
            // Obtain the root view controller for payment vault flow
            let viewController = MPFlowBuilder.startPaymentVaultViewController(1.00, currencyId : "MXN", purchaseTitle: "Purchase Title", excludedPaymentTypes: nil, excludedPaymentMethods: nil, callback: { (paymentMethod, tokenId, issuer, installments) -> Void in
              // After displaying the payment vault flow, you'll get paymentMethod, tokenId (for credit card), issuer (if necessary) and installments chosen by the buyer
              // Here you can make the payment with the info retrieved
           })
          </pre>
          <p><a name="payment_vault_ui"></a><b>Let's see!</b></p>
          <p>The following screen is shown:</p>
          <img class="centered" src="images/isoScreenshots/revamp-groups.png" alt="revamp-inicio">
          <p class="image_footer">Payment method choise example</p>
          <p>Your users can visualize their purchase information by clicking on the shopping cart icon:</p>
          <img class="centered" src="images/screenshots/revamp-shopping_cart.png" alt="revamp-shopping_cart">
          <p class="image_footer">Information shown when clicking on icon in the upper right corner of the screen</p>

          <p>Within this screen, your user will be able to choose a payment method by going into the shown options, as we'll see in the following sections.</p>

          <h3>Cards option selected</h2>
          <p>The user will see a list of the available card types supported, for example:</p>
          <img class="centered" src="images/screenshots/revamp-cards.png" alt="revamp-cards">
          <p class="image_footer">Card types</p>

          <h3>Cash option selected</h2>
          <p>The user will see a list of the available card types supported, for example:</p>
          <img class="centered" src="images/screenshots/revamp-cash.png" alt="revamp-cash">
          <p class="image_footer">Cash payment methods</p>

          <h3>Bank transfer option selected</h2>
          <p>The user will see a list of the available card types supported, for example:</p>
          <img class="centered" src="images/screenshots/revamp-bank_transfer.png" alt="revamp-bank_transfer">
          <p class="image_footer">Bank transfer payment methods</p>

          <h2>Retrieving the data in your activity</h2><a name="get_payment_method_data"></a>
          <p>Once you gather all buyer's purchase information in the callback, you can use all these parameters to <a href="make_payment">make a payment.</a></p>
          <br>
          <p>If a card payment method was selected, you'll get issuer, payer costs(installments), a "token" and the payment method. If any other payment method was selected, you'll just receive a payment mehtod.</p>

          <p>With this information, you'll be able to <a href="make_payment.html">Make a payment</a></p>

          <h2><a name="payment_method_exclusions"></a>Payment methods exclusions</h2>
          <p>If desired, you can avoid getting paid with a particular payment method, or any payment methods of a certain type. Also, you could set constraints in the amount of installments a user can select if paying with credit card.</p>
          <p>In case you choose not to initialize this parameter, all payment methods and types available for your country will be available for the buyer.</p>
          <p>To get familiar with what payment types we handle and how you should manage this information, take a look at <a href="payment_types_available.html">our payment types docs.</a></p>
          <p>When starting our payment method selection UI, you can set these exclusions:</p>

          <h3></a>Payment type exclusion</h2>

          <p>In this example, we will exclude prepaid card and ATM payment types.</p>
          <pre class="prettyprint">
          //Create a Set of excluded payment types using the PaymentTypeId enum provided
          let excludedPaymentTypes = Set([PaymentTypeId.PREPAID_CARD, PaymentTypeId.ATM])

          //Use the payment types set as parameter to start the payment flow.
          let vC = MPFlowBuilder.startPaymentVaultViewController(1.00, currencyId: "BRL", purchaseTitle: "this is a purchase title", excludedPaymentTypes: excludedPaymentTypes, excludedPaymentMethods: nil, callback: { (paymentMethod, tokenId, issuer, installments) -> Void in
            // Here you get all the payment info to make the payment
          })
          </pre>

          <p>And you'll see this:</p>
          <img class="centered" src="images/screenshots/revamp-excluded_types.png" alt="revamp-excluded_types">
          <p class="image_footer">Types excluded</p>

          <h3></a>Payment method exclusion</h2>
          <p>In this example, we will exclude all the "cash" payment methods, except "oxxo".</p>
          <pre class="prettyprint">
          //Create list of excluded payment methods somewhere in your code
          let excludedPaymentMethods = ["bancomer_bank_transfer"]

          //In this case we exclude payment methods instead of payment types, but you can use both exclusions
          let vc = MPFlowBuilder.startPaymentVaultViewController(1.00, currencyId: "BRL", purchaseTitle: "this is a purchase title", excludedPaymentTypes: nil, excludedPaymentMethods: excludedPaymentMethods, callback: { (paymentMethod, tokenId, issuer, installments) -> Void in

          })
          </pre>
          <p>And you'll see this:</p>
          <img class="centered" src="images/screenshots/revamp-oxxo_fijo.png" alt="revamp-oxxo_fijo">
          <p class="image_footer">Payment methods excluded</p>

          <h3></a>Installments constraint</h2>
          <p>You can also limit the amount of installments that will be offered to the payer, or set a default installments amount:</p>
          <pre class="prettyprint">

            let vc = MPFlowBuilder.startPaymentVaultViewController(1.00, currencyId : "MXN", purchaseTitle: "Purchase Title", excludedPaymentTypes: nil, excludedPaymentMethods: nil, installments : 6, defaultInstallments : 1, callback: { (paymentMethod, tokenId, issuer, installments) -> Void in
              // Here you have the information to make the payment. The value of installments will be for this case between 1 and 6
            })
          </pre>

        </section>
        <aside id="sidebar">
          <a href="https://github.com/mreverter/sdk-android" class="button"><small>View project on</small> GitHub</a>

          <a href="https://github.com/mreverter/sdk-android/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/mreverter/sdk-android/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/mreverter/sdk-android"></a> is maintained by <a href="https://github.com/mreverter">mreverter</a>.</p>
        </aside>
      </div>
    </div>
  </body>
</html>
